{% extends '/admin/users/index.html' %}
{% import '/base/html-renderer.html' as renderer %}

{% block breadcrumbs %}
  {{ super() }}
  {% if request.path == url_for('admin.users.add_or_edit') %}
    <div class="section active">Add User</div>
  {% else %}
    <div class="section active">Edit User</div>
  {% endif %}
{% endblock %}

{% block dashboard_title %}
User
{% endblock %}

{% block content %}
  <div class="ui segment">
    <form method="POST" class="ui form">
      {{ form.hidden_tag() }}
      <div class="three fields">
        {{ renderer.render_field(form.username) }}
        {{ renderer.render_field(form.citizen_id) }}
        {{ renderer.render_field(form.email) }}
      </div>
      <div class="three fields">
        {{ renderer.render_field(form.roles) }}
        {{ renderer.render_field(form.status) }}
        {{ renderer.render_multiple_select(org_form.organizations) }}
      </div>
      <div class="three fields">
        {{ renderer.render_field(form.title) }}
        {{ renderer.render_field(form.first_name) }}
        {{ renderer.render_field(form.last_name) }}
      </div>
      <div class="three fields">
        {{ renderer.render_field(form.title_th) }}
        {{ renderer.render_field(form.first_name_th) }}
        {{ renderer.render_field(form.last_name_th) }}
      </div>
      
      <div class="field" style="margin-top: 1ex;">
        {% if 'add' in request.path %}
        <button name='add' type="submit" class="ui button primary">Submit</button>
        {% elif 'edit' in request.path %}
        <a onclick="$('.modal.edit').modal('show')" class="ui labeled primary icon button">
          Change
        </a>
        {% endif %}
      </div>

      <div class="ui small modal edit">
        <div class="header">Edit User</div>
        <div class="content">
          <h4 class="ui headers" >
            Are you sure you want to edit <span class="ui primary text">{{ user.first_name }} {{ user.last_name }}</span> information?
          </h4>
          <button class="ui right floated primary button" onclick="$('.ui.form').submit()" style="margin-bottom: 1em;">
            Edit
          </button>
          <button class="ui right floated button" onclick="$('.modal.edit').modal('hide')">Cancel</button>
        </div>
      </div>

    </form>
  </div>

{% endblock %}
