{% extends '/admin/organizations/index.html' %}

{% block title %}{{ organization.name }}{% endblock %}

{% block dashboard_title %}
{{ organization.name }}
{# <a class="bug popup icon item" data-content="Edit This Page" href="{{ url_for('organizations.edit', organization_id=organization.id) }}">
    <h3><i class="edit icon"></i></h3>
</a>
#}
{% endblock %}

{% block breadcrumbs %}
{{ super() }}
{% if request.endpoint == 'admin.organizations.view' %}
<div class="active section">{{ organization.name }}</div>
{% else %}
<a href="{{ url_for('admin.organizations.view', organization_id=organization.id) }}" class="section">{{ organization.name }}</a>
<div class="divider"> / </div>
{% endif %}
{% endblock %}



{% block content %}
<table class="ui definition table">
	<tbody>
		<tr>
			<td class="three wide column">Organization</td>
			<td>{{ organization.name }}</td>
		</tr>
		<tr>
			<td>Description</td>
			<td>{{ organization.description }}</td>
		</tr>
		<tr>
		</tr>
		<tr>
			<td>Quota Remaining</td>
			<td>{{ organization.remaining_quota }}/{{ organization.quota }}</td>
		</tr>
		<tr>
	</tbody>
</table>

<div class="ui divider"></div>
<a class="ui green labeled icon button" href="{{ url_for('admin.organizations.view_users', organization_id=organization.id, role='all') }}">
	<i class="users icon"></i>Users
</a>
<a class="ui green labeled icon button" href="{{ url_for('admin.organizations.view_users', organization_id=organization.id, role='admin') }}">
	<i class="users icon"></i>Admins
</a>
<a class="ui green labeled icon button" href="{{ url_for('admin.organizations.view_users', organization_id=organization.id, role='endorser') }}">
	<i class="users icon"></i>Endorsers
</a>

<a class="ui green labeled icon button" href="{{ url_for('admin.classes.create_or_edit', organization_id=organization.id) }}">
	<i class="add icon"></i>Add Class
</a>


<h3 class="ui header">Logos</h3>
<div class="ui divider"></div>
<a class="ui primary labeled icon button" href="{{ url_for('admin.organizations.add_logo', organization_id=organization.id) }}"><i class="add icon"></i>Add Logo</a>

<!-- <style>
	div.scroll {
        display: flex;
		gap: var(--size3--);
		grid-auto-flow: row;
		grid-auto-columns:10%;

		overflow-x: auto;
		overscroll-behavior-inline: contain;
	}
</style> -->

<div style="margin-top: 1rem;">
		<div class="scroll">
		<div class="ui cards">
		{% for logo in logos %}
		<div class="card" style="width: 15=em;">

			<div class="small image">
				<img src="{{ url_for('admin.organizations.show_logo', organization_id=organization.id, filename=logo.id) }}" />
			</div>

			<div class="ui content">
				<div class="header">{{ logo.logo_name }}</div>
				<div class="owner"><b>Owner : </b>{{ logo.uploaded_by.first_name }} {{ logo.uploaded_by.last_name }}</div>
					<div class="right floated">
						<a onclick="showDeleteModal('{{logo.id}}') "><i class="red trash icon"></i></a>
					</div>
					<div class="ui small modal {{logo.id}}">
						<div class="header">Delete Logo</div>
						<div class="content">
							<h4 class="ui headers" >
								Are you sure you want to delete <span class="ui red text">{{ logo.logo_name }}</span> logo?
							</h4>
							<a class="ui right floated negative button" style="margin-bottom: 1em;" href="{{ url_for('admin.organizations.delete_logo', organization_id=organization.id, logo_id=logo.id)}}">
								Delete</i>
							</a>
							<button class="ui right floated button" onclick="showDeleteModal()">Cancel</button>
						</div>
					  </div>
			</div>

		</div>
		{% endfor %}
		</div>
		</div>
</div>

{% endblock %}

{% block additional_js %}
<script>
    function showDeleteModal(logo_id) {
        logo_id ?  $('.ui.small.modal.'+logo_id).modal('show') : $('.ui.small.modal').modal('hide') 
    ;
    }
</script>
{% endblock %}
