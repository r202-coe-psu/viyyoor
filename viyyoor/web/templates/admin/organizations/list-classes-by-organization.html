{% extends '/admin/organizations/view.html' %}

{% block title %}{{ organization.name }}{% endblock %}

{% block dashboard_title %}
{{ organization.name }}
{# <a class="bug popup icon item" data-content="Edit This Page" href="{{ url_for('organizations.edit', organization_id=organization.id) }}">
    <h3><i class="edit icon"></i></h3>
</a>
#}
{% endblock %}

{% block breadcrumbs %}
{{ super() }}
{% if request.endpoint == 'admin.organizations.view_classes' %}
<div class="active section">Classes</div>
{% else %}
<a href="{{ url_for('admin.organizations.view_classes', organization_id=organization.id) }}" class="section">Classes</a>
<i class="right angle icon divider"></i>
{% endif %}
{% endblock %}



{% block content %}
<div class="ui top attached tabular menu">
	<a class="item" href="{{ url_for('admin.organizations.view', organization_id=organization.id) }}">
		<i class="home icon"></i>Overview
	</a>
	<a class="item" href="{{ url_for('admin.organizations.view_users', organization_id=organization.id, role='all') }}">
		<i class="users icon"></i>Users
	</a>
	<a class="item active" href="{{ url_for('admin.organizations.view_classes', organization_id=organization.id) }}">
		<i class="archive icon"></i>Classes
	</a>
	<a class="item" href="{{ url_for('admin.organizations.view_logos', organization_id=organization.id)}}">
		<i class="certificate icon"></i>Logos
	</a>
</div>

<h2 class="ui header">
    Classes
    <a class="ui primary tertiary right floated large button" href="{{ url_for('admin.classes.create_or_edit', organization_id=organization.id) }}">
        <i class="add icon"></i> Add Class
    </a>
</h2>
<div class="ui divider"></div>
<div class="ui basic segment">
    <div class="ui cards">
        {% for class_ in classes %}
        <div class="card">
        <div class="content">
            <a class="header" href="{{ url_for('admin.classes.view', class_id=class_.id) }}">{{ class_.name }}</a>
            <div class="meta">{{ class_.printed_name }}</div>
            <div class="description">
            {{ class_.description }}
            </div>
        </div>
        <div class="extra content">
            <span class="left floated star">
                <a class="link pop" data-content="view" data-position="bottom left" href="{{ url_for('admin.classes.view', class_id=class_.id) }}"><i class="blue eye circular colored icon"></i></a>
                <a class="link pop" data-content="edit" data-position="bottom left" href="{{ url_for('admin.classes.create_or_edit', class_id=class_.id) }}"><i class="blue edit circular colored icon"></i></a>
                <a class="link pop" data-content="copy" data-position="bottom left" href="{{ url_for('admin.classes.copy', class_id=class_.id) }}"><i class="blue copy circular colored icon"></i></a>
            </span>
            <span class="right floated">
                <a class="ui mini basic circular icon button link pop" data-content="disactive" data-position="bottom left" onclick="showDeleteModal('{{ class_.id }}')"><i class="trash icon"></i></a>
            </span>
        </div>
        </div>
        <div class="ui small modal {{class_.id}}">
            <div class="header">Delete Class</div>
            <div class="content">
            <h4 class="ui headers" >
                Are you sure you want to delete <span class="ui red text">{{ class_.name }}</span> class?
            </h4>
            <a class="ui right floated negative button" style="margin-bottom: 1em;" href="{{ url_for('admin.classes.delete', class_id=class_.id) }}">
                Delete</i>
            </a>
            <button class="ui right floated button" onclick="showDeleteModal()">Cancel</button>
            </div>
        </div>
        {% endfor %}
    </div>

</div>
	
{% endblock %}

{% block additional_js %}
<script>
    function showDeleteModal(logo_id) {
        logo_id ?  $('.ui.small.modal.'+logo_id).modal('show') : $('.ui.small.modal').modal('hide') 
    ;
    }
	$('.link.pop').popup({
		delay: {
			show: 800,
	  }
	})
</script>
{% endblock %}

onclick="showEditModal('{{organization.id}}')"